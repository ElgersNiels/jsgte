<!doctype html>
<html class="no-js" lang"">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>2 by 2 games</title>
        <link rel="stylesheet" href="css/2by2.css">
    </head>
</script>

<body onload="initDraws()">
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

<script>
    var svg;
    var ctx1,ctx2;
    var points=[];
    var svgH=400;
    var svgW=300;
    var moving_point;
    var payoff=[];
    var precision;
    

    
    function initDraws() {
        precision=1/document.getElementById("precision").value;
        svg = document.getElementById("SVG");
        svgPosition = svg.getBoundingClientRect();
        payoff=document.getElementsByClassName("pay");
        lines=document.getElementsByClassName("line_trans");
        for(i=0;i<8;i++){
            payoff[i].addEventListener("mousedown", doMouseDown);
        }
        for(i=0;i<4;i++){
            lines[i].addEventListener("mousedown", doMouseDown);
        }
        compute_firstP();
        compute_secondP();
        draw();
    }


function redraw(){
    precision=1/document.getElementById("precision").value;
    compute_firstP();
    compute_secondP();
    draw();
}

function getMousePosition(e) {
    return {
        x: e.clientX ,
        y: e.clientY
  };
}


function doMouseDown(event) {
    event.preventDefault();
    console.log("Down: "+this.getAttribute("class"));
    moving_point=this;
    if (this.getAttribute("class")=="line_trans"){
        Pos_prev=getMousePosition(event);
        document.addEventListener("mousemove", doMouseMoveLine);
    }
    else
        document.addEventListener("mousemove", doMouseMove);
    document.addEventListener("mouseup", doMouseUp);
    this.removeEventListener("mousedown", doMouseDown);
}


function doMouseUp(event) {
    mousePosition = getMousePosition(event)
    if (moving_point.getAttribute("class")=="line_trans")
        document.removeEventListener("mousemove", doMouseMoveLine);
    else
        document.removeEventListener("mousemove", doMouseMove);
    document.removeEventListener("mouseup", doMouseUp);
    moving_point.addEventListener("mousedown", doMouseDown);
    moving_point=null;
    //console.log("Releasing: X = " + mousePosition.x + ", Y = " + mousePosition.y);
}


function doMouseMove(event) {
    var mousePosition = getMousePosition(event)
    svgPosition = svg.getBoundingClientRect();
    //var newPos=~~((-mousePosition.y+svgPosition.top+svgH-50)/3)/10;
    var newPos=Math.round((2*svgH/(svgPosition.bottom-svgPosition.top)*(-mousePosition.y+svgPosition.top)+svgH-50)/30*precision)/precision;
    if (Number(newPos)<0) newPos=0;
    if (Number(newPos)>10) newPos=10;
    if( (Number(newPos)-moving_point.getAttribute("cy"))*(Number(newPos)-moving_point.getAttribute("cy"))>0.005){
       document.getElementById(moving_point.getAttribute("asso")).value=newPos;
       redraw();
    }
    
    //console.log("Moving: X = " + mousePosition.x + ", Y = " + mousePosition.y);
}

function doMouseMoveLine(event) {
    var mousePosition = getMousePosition(event)
    diff=mousePosition.y-Pos_prev.y;
        var point1=document.getElementById(moving_point.getAttribute("asso1"));
        var diffPos=~~((svgH/(svgPosition.bottom-svgPosition.top)*(diff))/30*precision)/precision;
        var point2=document.getElementById(moving_point.getAttribute("asso2"));
        var pos1=Math.round((point1.value-diffPos)*precision)/precision;
        var pos2=Math.round((point2.value-diffPos)*precision)/precision;
        if (pos2>=0 && pos2<=10 && pos1>=0 && pos1<=10 && diffPos!=0  ){
            point1.value=pos1;
            point2.value=pos2;
            Pos_prev=mousePosition;
            redraw();
    }

    
    //console.log("Moving: X = " + mousePosition.x + ", Y = " + mousePosition.y);
}



function compute_firstP(){
        var P1_11=Math.round(document.getElementById("P1_11").value*precision)/precision;
        document.getElementById("P1_11").value=P1_11;
        var P1_12=Math.round(document.getElementById("P1_12").value*precision)/precision;
        document.getElementById("P1_12").value=P1_12;
        var P1_21=Math.round(document.getElementById("P1_21").value*precision)/precision;
        document.getElementById("P1_21").value=P1_21;
        var P1_22=Math.round(document.getElementById("P1_22").value*precision)/precision;
        document.getElementById("P1_22").value=P1_22;
        payoff[0].setAttributeNS(null, "cy", svgH-50-P1_11*30);
        payoff[1].setAttributeNS(null, "cy", svgH-50-P1_12*30);
        payoff[2].setAttributeNS(null, "cy", svgH-50-P1_21*30);
        payoff[3].setAttributeNS(null, "cy", svgH-50-P1_22*30);
        var maxP1_1, minP1_1, maxP1_2, minP1_2; // max and min off player1 payoff for strategy 1 or 2 of player2
        if( Number(P1_11)>Number(P1_21)){
            maxP1_1=P1_11;
            minP1_1=P1_21;
            M1_1=1;
        }else{
            maxP1_1=P1_21;
            minP1_1=P1_11;
            M1_1=2;
        }
        if( Number(P1_12)>Number(P1_22)){
            maxP1_2=P1_12;
            minP1_2=P1_22;
            M1_2=1;
        }else{
            maxP1_2=P1_22;
            minP1_2=P1_12;
            M1_2=2;
        }
        if(maxP1_1==P1_11 && maxP1_2==P1_12){ //If 1 is the best strategy, the middle point is on the left
            point1_1={x:50,y:svgH-50-maxP1_1*30};
            point1_2={x:50,y:svgH-50-maxP1_1*30};
            point1_3={x:svgW-50,y:svgH-50-maxP1_2*30};}
        else if(maxP1_1==P1_21 && maxP1_2==P1_22){//If 2 is the best strategy, the middle point is on the right
            point1_1={x:50,y:svgH-50-maxP1_1*30};
            point1_2={x:svgW-50,y:svgH-50-maxP1_2*30};
            point1_3={x:svgW-50,y:svgH-50-maxP1_2*30};
            }
        else{
            var middle_x=(P1_21-P1_11)/(Number(P1_21)- Number(P1_22) + Number(P1_12) - Number(P1_11));
            var middle_y=Number((P1_12-P1_11)*middle_x)+Number(P1_11);
            point1_1={x:50, y:svgH-50-maxP1_1*30};
            point1_2={x:middle_x * (svgW-100)+50,y:svgH-50-middle_y*30};
            point1_3={x:svgW-50,y:svgH-50-maxP1_2*30};
               
        }
    }
            
    function compute_secondP(){
        var P2_11=Math.round(document.getElementById("P2_11").value*precision)/precision;
        document.getElementById("P2_11").value=P2_11;
        var P2_12=Math.round(document.getElementById("P2_12").value*precision)/precision;
        document.getElementById("P2_12").value=P2_12;
        var P2_21=Math.round(document.getElementById("P2_21").value*precision)/precision;
        document.getElementById("P2_21").value=P2_21;
        var P2_22=Math.round(document.getElementById("P2_22").value*precision)/precision;
        document.getElementById("P2_22").value=P2_22;
        
        payoff[4].setAttributeNS(null, "cy", svgH-50-P2_11*30);
        payoff[5].setAttributeNS(null, "cy", svgH-50-P2_12*30);
        payoff[6].setAttributeNS(null, "cy", svgH-50-P2_21*30);
        payoff[7].setAttributeNS(null, "cy", svgH-50-P2_22*30);
        var maxP2_1, minP2_1, maxP2_2, minP2_2; // max and min off player1 payoff for strategy 1 or 2 of player2
        if( Number(P2_11)>Number(P2_12)){
            maxP2_1=P2_11;
            minP2_1=P2_12;
            M2_1=1;
        }else{
            maxP2_1=P2_12;
            minP2_1=P2_11;
            M2_1=2;
        }
        if( Number(P2_21)>Number(P2_22)){
            maxP2_2=P2_21;
            minP2_2=P2_22;
            M2_2=1;
        }else{
            maxP2_2=P2_22;
            minP2_2=P2_21;
            M2_2=2;
        }
        if(maxP2_1==P2_11 && maxP2_2==P2_21){//If 1 is the best strategy, the middle point is on the left
            point2_1={x:450,y:svgH-50-maxP2_1*30};
            point2_2={x:450,y:svgH-50-maxP2_1*30};
            point2_3={x:svgW-50+400,y:svgH-50-maxP2_2*30};
            }
        else if (maxP2_1==P2_12 && maxP2_2==P2_22){//If 2 is the best strategy, the middle point is on the right
            point2_1={x:450,y:svgH-50-maxP2_1*30};
            point2_2={x:svgW-50+400,y:svgH-50-maxP2_2*30};
            point2_3={x:svgW-50+400,y:svgH-50-maxP2_2*30};
        }
        else{
            var middle_x=(P2_12-P2_11)/(Number(P2_12)- Number(P2_22) + Number(P2_21) - Number(P2_11));
            var middle_y=Number((P2_21-P2_11)*middle_x)+Number(P2_11);
            point2_1={x:450,y:svgH-50-maxP2_1*30};
            point2_2={x:middle_x * (svgW-100)+450,y:svgH-50-middle_y*30};
            point2_3={x:svgW-50+400,y:svgH-50-maxP2_2*30};
        }
    }
    
    function draw(){
        var P1S1=document.getElementById("P1S1").value;
        var P1S2=document.getElementById("P1S2").value;
        var P2S1=document.getElementById("P2S1").value;
        var P2S2=document.getElementById("P2S2").value;
        // Lines update svg1
        var lines=svg.getElementsByClassName("lined1");
        lines[0].setAttributeNS(null, "y1", payoff[0].getAttribute("cy"));
        lines[0].setAttributeNS(null, "y2", payoff[1].getAttribute("cy"));
        lines[1].setAttributeNS(null, "y1", payoff[0].getAttribute("cy"));
        lines[1].setAttributeNS(null, "y2", payoff[1].getAttribute("cy"));
        if (point1_2.x<250){//Label strategy iff they are part of a best reponse
            var labelline=svg.getElementById("text11");
            labelline.setAttributeNS(null, "y", Number(payoff[0].getAttribute("cy"))+Number((payoff[1].getAttribute("cy")-(payoff[0].getAttribute("cy")))/200*30)+Number(20));
            labelline.textContent=P1S1;
        }
        else {
            labelline=svg.getElementById("text11");
            labelline.textContent="";
        }
        lines[2].setAttributeNS(null, "y1", payoff[2].getAttribute("cy"));
        lines[2].setAttributeNS(null, "y2", payoff[3].getAttribute("cy"));
        lines[3].setAttributeNS(null, "y1", payoff[2].getAttribute("cy"));
        lines[3].setAttributeNS(null, "y2", payoff[3].getAttribute("cy"));
        if(point1_2.x>50){//Label strategy iff they are part of a best reponse
            labelline=svg.getElementById("text12");
            labelline.setAttributeNS(null, "y", Number(payoff[3].getAttribute("cy"))+Number((payoff[2].getAttribute("cy")-(payoff[3].getAttribute("cy")))/200*30)+Number(20));
            labelline.textContent=P1S2;
        }
        else {
            labelline=svg.getElementById("text12");
            labelline.textContent="";
        }
        // Lines update svg2
        lines=svg.getElementsByClassName("lined2");
        lines[0].setAttributeNS(null, "y1", payoff[4].getAttribute("cy"));
        lines[0].setAttributeNS(null, "y2", payoff[6].getAttribute("cy"));
        lines[1].setAttributeNS(null, "y1", payoff[4].getAttribute("cy"));
        lines[1].setAttributeNS(null, "y2", payoff[6].getAttribute("cy"));
        if(point2_2.x<650){//Label strategy iff they are part of a best reponse
            labelline=svg.getElementById("text21");
            labelline.setAttributeNS(null, "y", Number(payoff[4].getAttribute("cy"))+Number((payoff[6].getAttribute("cy")-(payoff[4].getAttribute("cy")))/200*30)+Number(20));
            labelline.textContent=P2S1;
        }
        else {
            labelline=svg.getElementById("text21");
            labelline.textContent="";
        }
        lines[2].setAttributeNS(null, "y1", payoff[5].getAttribute("cy"));
        lines[2].setAttributeNS(null, "y2", payoff[7].getAttribute("cy"));
        lines[3].setAttributeNS(null, "y1", payoff[5].getAttribute("cy"));
        lines[3].setAttributeNS(null, "y2", payoff[7].getAttribute("cy"));
        if (point2_2.x>450){//Label strategy iff they are part of a best reponse
            labelline=svg.getElementById("text22");
            labelline.setAttributeNS(null, "y", Number(payoff[7].getAttribute("cy"))+Number((payoff[5].getAttribute("cy")-(payoff[7].getAttribute("cy")))/200*30)+Number(20));
            labelline.textContent=P2S2;
        }
        else {
            labelline=svg.getElementById("text22");
            labelline.textContent="";
        }
        //envelop svg1
        var envelop1=document.getElementById("envelop1");
        envelop1.setAttributeNS(null,"points", "50,50 "+point1_1.x+","+point1_1.y+" "+point1_2.x+","+point1_2.y+" "+point1_3.x+","+point1_3.y+" 250,50");
        var inter=svg.getElementById("inter1");
        inter.setAttributeNS(null,"cx", point1_2.x);
        inter.setAttributeNS(null,"cy", point1_2.y);
        var interlabel=svg.getElementById("interlabel1");
        interlabel.setAttributeNS(null, "x",point1_2.x);
        interlabel.textContent=Math.round((Number(point1_2.x)-50)/2)/100;
        var stick=svg.getElementsByClassName("interstick1");
        for (i=0;i<stick.length;i++){
            stick[i].setAttributeNS(null, "x1",point1_2.x);
            stick[i].setAttributeNS(null, "x2",point1_2.x);}
        //envelop svg2
        var envelop2=document.getElementById("envelop2");
        envelop2.setAttributeNS(null,"points", "450,50 "+point2_1.x+","+point2_1.y+" "+point2_2.x+","+point2_2.y+" "+point2_3.x+","+point2_3.y+" 650,50");
        inter=svg.getElementById("inter2");
        inter.setAttributeNS(null,"cx", point2_2.x);
        inter.setAttributeNS(null,"cy", point2_2.y);
        interlabel=svg.getElementById("interlabel2");
        interlabel.setAttributeNS(null, "x",point2_2.x);
        interlabel.textContent=Math.round((Number(point2_2.x)-450)/2)/100;
        var stick=svg.getElementsByClassName("interstick2");
        for (i=0;i<stick.length;i++){
            stick[i].setAttributeNS(null, "x1",point2_2.x);
            stick[i].setAttributeNS(null, "x2",point2_2.x);
        }
        
        //change legend according to strategies name.
        /*var temp= svg.getElementById("y11");
        temp.textContent=P2S1;
        temp= svg.getElementById("y12");
        temp.textContent=P2S2;
        temp= svg.getElementById("y21");
        temp.textContent=P1S1;
        temp= svg.getElementById("y22");
        temp.textContent=P1S2;*/
        var temp= svg.getElementsByClassName("strat22");
        for (i=0;i<temp.length;i++){
            temp[i].textContent=P2S2;
        }
        temp= svg.getElementsByClassName("strat21");
        for (i=0;i<temp.length;i++){
            temp[i].textContent=P2S1;
        }
        temp= svg.getElementsByClassName("strat12");
        for (i=0;i<temp.length;i++){
            temp[i].textContent=P1S2;
        }
        temp= svg.getElementsByClassName("strat11");
        for (i=0;i<temp.length;i++){
            temp[i].textContent=P1S1;
        }
        
        
        //Best reponse path
        temp= svg.getElementsByClassName("br");
        temp2= svg.getElementsByClassName("brline");
        var path1="";
        var path2="";
        console.log(temp2.length);
        if (M2_1==1){
            temp[0].setAttributeNS(null, "cx", 50);
            path1="50,";
            path2="50,";
        }
        else{
            temp[0].setAttributeNS(null, "cx", 250);
            path1="250,";
            path2="250,";
        }
        if (M1_1==1){
            temp[0].setAttributeNS(null, "cy", 500);
            path1=path1+500+", ";
            path2=path2+500+", ";
        }
        else{
            temp[0].setAttributeNS(null, "cy", 700);
            path1=path1+700+", ";
            path2=path2+700+", ";
        }

        if (M2_2==1){
            temp[1].setAttributeNS(null, "cx", 50);
        }
        else{
            temp[1].setAttributeNS(null, "cx", 250);
        }
        if (M1_2==1){
            temp[1].setAttributeNS(null, "cy", 500);
        }
        else{
            temp[1].setAttributeNS(null, "cy", 700);
        }
        if (point1_2.x>50 && point1_2.x<250 && point2_2.x>450 && point2_2.x<650){
            var posx=50+point1_2.x-50;
            temp[2].setAttributeNS(null, "x", posx-10);
            path1=path1+posx+","+temp[0].getAttribute("cy")+", "+posx+","+temp[1].getAttribute("cy")+" ,"+temp[1].getAttribute("cx")+","+temp[1].getAttribute("cy");
            var posy=500+point2_2.x-450;
            temp[2].setAttributeNS(null, "y", posy-10);
            temp[2].setAttributeNS(null, "height", 20);
            temp[2].setAttributeNS(null, "width", 20);
            path2=path2+temp[0].getAttribute("cx")+","+posy+", "+temp[1].getAttribute("cx")+","+posy+", "+temp[1].getAttribute("cx")+","+temp[1].getAttribute("cy");
        }
        else{
            temp[2].setAttributeNS(null, "height", 0);
            temp[2].setAttributeNS(null, "width", 0);
            if (temp[0].getAttribute("cy")==temp[1].getAttribute("cy")){
                path2=path2+temp[0].getAttribute("cx")+","+temp[1].getAttribute("cy")+", "+temp[1].getAttribute("cx")+","+temp[1].getAttribute("cy");
                path1="";
            }
            else{
                path2="";
                path1=path1+temp[1].getAttribute("cx")+","+temp[0].getAttribute("cy")+", "+temp[1].getAttribute("cx")+","+temp[1].getAttribute("cy");
            }
        }
        temp2[0].setAttributeNS(null, "points", path1);
        temp2[1].setAttributeNS(null, "points", path2);
        
        var stick=svg.getElementsByClassName("middle11");
        for (i=0;i<stick.length;i++){
            if(point2_2.x==450){
                stick[i].textContent=""
            }
            pos=(point2_2.x+Number(450))/2;
            stick[i].setAttributeNS(null, "x",pos);
        }
        var stick=svg.getElementsByClassName("middle12");
        for (i=0;i<stick.length;i++){
            if(point2_2.x==650){
                stick[i].textContent=""
            }
            pos=(point2_2.x+Number(650))/2;
            stick[i].setAttributeNS(null, "x",pos);
        }
        
        var stick=svg.getElementsByClassName("middle21");
        for (i=0;i<stick.length;i++){
            if(point1_2.x==50){
                stick[i].textContent=""
            }
            pos=(point1_2.x+Number(50))/2;
            stick[i].setAttributeNS(null, "x",pos);
        }
        var stick=svg.getElementsByClassName("middle22");
        for (i=0;i<stick.length;i++){
            if(point1_2.x==250){
                stick[i].textContent=""
            }
            pos=(point1_2.x+Number(250))/2;
            stick[i].setAttributeNS(null, "x",pos);
        }
    }

</script>
 <!-- Table for user to update payoff and strategies' names.-->
 <div>
     <label>Precision : </label>
     <input class="precision" type="text" id="precision" onchange="redraw()" value="1"/>

        <table border="1">
  <tr>
    <th><p><label class="player1 name">Player I</label></p>
        <p><label class="player2">Player II</label></p>
    </th>
    <th><label><input class="player2 strat" type="text" id="P2S1" onchange="redraw()" value="l"/> </label></th>
    <th><label><input class="player2 strat" type="text" id="P2S2" onchange="redraw()" value="r"/> </label></th>
  </tr>
  <tr>
      <th><label><input class="player1 strat" type="text" id="P1S1" onchange="redraw()" value="T"/> </label></th>
    <td><p><input class="player1 payoff" type="text" id="P1_11" onchange="redraw()" value=0></p>
        <p><input class="player2 payoff" type="text" id="P2_11"  onchange="redraw()" value=0></p>
    </td>
    <td><p><input class="player1 payoff" type="text" id="P1_12" onchange="redraw()" value=0></p>
        <p><input class="player2 payoff" type="text" id="P2_12" onchange="redraw()" value=0></p>
    </td>
  </tr>
  <tr>
  <th><label><input class="player1 strat" type="text" id="P1S2" onchange="redraw()" value="B"/> </label></th>
    <td>
        <p><input class="player1 payoff" type="text" id="P1_21" onchange="redraw()" value=0></p>
        <p><input class="player2 payoff" type="text" id="P2_21"  onchange="redraw()" value=0></p>
    </td>
    <td>
        <p><input class="player1 payoff" type="text" id="P1_22" onchange="redraw()" value=0></p>
        <p><input class="player2 payoff" type="text" id="P2_22"  onchange="redraw()" value=0></p>
    </td>
  </tr>
</table>
        </div>
        
        <svg id="SVG" version="1.1" currentScale="1" viewBox="0 0 700 750">
            <polyline class="contour" points="0,0 0,750 700,750, 700,0 0,0"/>
            <!-- Drawing the contour-->
            <polyline class="contour" points="50,50 50,350 250,350, 250,50"/>
            <!-- Legend, strategy names will be updated after-->
            <text class="player1 title" x="150" y="40">Player1 payoff</text>
            <text class="player2 legendh" x="140" y="390">Player2 proba of</text><text class="player2 strat_left strat22" x="205" y="390">S2 </text>
            <!--
            <text class="player2 legendv" id="y11" x="20" y="200" transform="rotate(270 20,200)">S1</text>
            <text class="player2 legendv" id="y12" x="280" y="200" transform="rotate(90 280,200)">S2</text>
             -->
            <text class="player2 legendh" x="50" y="370">0</text>
            <text class="player2 legendh" x="250" y="370">1</text>
            <!-- Upper envelop, coordinates will be updated-->
            <polygon id="envelop1" points="50,50 50,350 250,350 250,50"/>
            <!-- First strategy payoff-->
            <line class="line1 lined1"  id="11" x1="50" y1="350" x2="250" y2="350"/>
            <line class="line_trans lined1" asso1="P1_11"  asso2="P1_12" x1="50" y1="350" x2="250" y2="350"/>
            <text id="text11" class="player1 strat" x="80" y="350">S1</text>
            <!-- Second strategy payoff-->
            <line class="line1 lined1" id="12" x1="50" y1="350" x2="250" y2="350"/>
            <line class="line_trans lined1" asso1="P1_21"  asso2="P1_22" x1="50" y1="350" x2="250" y2="350"/>
            <text id="text12" class="player1 strat" x="220" y="350">S2</text>
            <!-- Sticks-->
            <line class="stick" x1="50" y1="80" x2="45" y2="80"/>
            <text class="sticklabel" x="40" y="85">9</text>
            <line class="stick" x1="50" y1="110" x2="45" y2="110"/>
            <text class="sticklabel" x="40" y="115">8</text>
            <line class="stick" x1="50" y1="140" x2="45" y2="140"/>
            <text class="sticklabel" x="40" y="145">7</text>
            <line class="stick" x1="50" y1="170" x2="45" y2="170"/>
            <text class="sticklabel" x="40" y="175">6</text>
            <line class="stick" x1="50" y1="200" x2="45" y2="200"/>
            <text class="sticklabel" x="40" y="205">5</text>
            <line class="stick" x1="50" y1="230" x2="45" y2="230"/>
            <text class="sticklabel" x="40" y="235">4</text>
            <line class="stick" x1="50" y1="260" x2="45" y2="260"/>
            <text class="sticklabel" x="40" y="265">3</text>
            <line class="stick" x1="50" y1="290" x2="45" y2="290"/>
            <text class="sticklabel" x="40" y="295">2</text>
            <line class="stick" x1="50" y1="320" x2="45" y2="320"/>
            <text class="sticklabel" x="40" y="325">1</text>
            <line class="stick" x1="250" y1="80" x2="255" y2="80"/>
            <text class="sticklabel" x="260" y="85">9</text>
            <line class="stick" x1="250" y1="110" x2="255" y2="110"/>
            <text class="sticklabel" x="260" y="115">8</text>
            <line class="stick" x1="250" y1="140" x2="255" y2="140"/>
            <text class="sticklabel" x="260" y="145">7</text>
            <line class="stick" x1="250" y1="170" x2="255" y2="170"/>
            <text class="sticklabel" x="260" y="175">6</text>
            <line class="stick" x1="250" y1="200" x2="255" y2="200"/>
            <text class="sticklabel" x="260" y="205">5</text>
            <line class="stick" x1="250" y1="230" x2="255" y2="230"/>
            <text class="sticklabel" x="260" y="235">4</text>
            <line class="stick" x1="250" y1="260" x2="255" y2="260"/>
            <text class="sticklabel" x="260" y="265">3</text>
            <line class="stick" x1="250" y1="290" x2="255" y2="290"/>
            <text class="sticklabel" x="260" y="295">2</text>
            <line class="stick" x1="250" y1="320" x2="255" y2="320"/>
            <text class="sticklabel" x="260" y="325">1</text>
            <!-- Intersection point-->
            <circle class="inter" id="inter1" cx="250" cy="350" r="5" draggable="false" ondragstart="doMouseDown()"/>
            <line class="line2 interstick1" x1="250" y1="350" x2="250" y2="355"/>
            <text class="player2 legendh" id="interlabel1" x="250" y="370">1</text>
            <!-- Payoff points-->
            <circle class="pay line1" id="Payoff1_11" asso="P1_11" cx="50" cy="350" r="5" draggable="false" ondragstart="doMouseDown()"/>
            <circle class="pay line1" id="Payoff1_12" asso="P1_12" cx="250" cy="350" r="5"  draggable="false" ondragstart="doMouseDown()"/>
            <circle class="pay line1" id="Payoff1_21" asso="P1_21" cx="50" cy="350" r="5"  draggable="false" ondragstart="doMouseDown()"/>
            <circle class="pay line1" id="Payoff1_22" asso="P1_22" cx="250" cy="350" r="5" draggable="false" ondragstart="doMouseDown()"/>

            <!-- Drawing the contour-->
            <polyline class="contour" points="450,50 450,350 650,350, 650,50" draggable="false"/>
            <!-- Legend, strategy names will be updated after-->
            <text class="player2 title" x="550" y="40">Player2 payoff</text>
            <text class="player1 legendh" x="540" y="390">Player1 proba of </text><text class="player1 strat_left strat12" x="605" y="390">S2 </text>
            <text class="player1 legendh" x="450" y="370">0</text>
            <text class="player1 legendh" x="650" y="370">1</text>
            <!--
            <text class="player1 legendv" id="y21" x="420" y="200"transform="rotate(270 420,200)">S1</text>
            <text class="player1 legendv" id="y22" x="680" y="200"transform="rotate(90 680,200)">S2</text>
             -->
            <!-- Upper envelop, coordinates will be updated-->
            <polygon id="envelop2" points="450,50 450,350 450,350 450,50"/>
            <!-- First strategy payoff-->
            <line class="line2 lined2" id="21" x1="450" y1="350" x2="650" y2="350"/>
            <line class="line_trans lined2" asso1="P2_11"  asso2="P2_21"  x1="450" y1="350" x2="650" y2="350"/>
            <text id="text21" class="player2 legendv" x="480" y="350">S1</text>
            <!-- Second strategy payoff-->
            <line class="line2 lined2"  id="22" x1="450" y1="350" x2="650" y2="350"/>
            <line class="line_trans lined2" asso1="P2_12"  asso2="P2_22" x1="450" y1="350" x2="650" y2="350"/>
            <text id="text22" class="player2 legendv" x="620" y="350">S2</text>
            <!-- Sticks-->
            <line class="stick" x1="450" y1="80" x2="445" y2="80"/>
            <text class="sticklabel" x="440" y="85">9</text>
            <line class="stick" x1="450" y1="110" x2="445" y2="110"/>
            <text class="sticklabel" x="440" y="115">8</text>
            <line class="stick" x1="450" y1="140" x2="445" y2="140"/>
            <text class="sticklabel" x="440" y="145">7</text>
            <line class="stick" x1="450" y1="170" x2="445" y2="170"/>
            <text class="sticklabel" x="440" y="175">6</text>
            <line class="stick" x1="450" y1="200" x2="445" y2="200"/>
            <text class="sticklabel" x="440" y="205">5</text>
            <line class="stick" x1="450" y1="230" x2="445" y2="230"/>
            <text class="sticklabel" x="440" y="235">4</text>
            <line class="stick" x1="450" y1="260" x2="445" y2="260"/>
            <text class="sticklabel" x="440" y="265">3</text>
            <line class="stick" x1="450" y1="290" x2="445" y2="290"/>
            <text class="sticklabel" x="440" y="295">2</text>
            <line class="stick" x1="450" y1="320" x2="445" y2="320"/>
            <text class="sticklabel" x="440" y="325">1</text>
            <line class="stick" x1="650" y1="80" x2="655" y2="80"/>
            <text class="sticklabel" x="660" y="85">9</text>
            <line class="stick" x1="650" y1="110" x2="655" y2="110"/>
            <text class="sticklabel" x="660" y="115">8</text>
            <line class="stick" x1="650" y1="140" x2="655" y2="140"/>
            <text class="sticklabel" x="660" y="145">7</text>
            <line class="stick" x1="650" y1="170" x2="655" y2="170"/>
            <text class="sticklabel" x="660" y="175">6</text>
            <line class="stick" x1="650" y1="200" x2="655" y2="200"/>
            <text class="sticklabel" x="660" y="205">5</text>
            <line class="stick" x1="650" y1="230" x2="655" y2="230"/>
            <text class="sticklabel" x="660" y="235">4</text>
            <line class="stick" x1="650" y1="260" x2="655" y2="260"/>
            <text class="sticklabel" x="660" y="265">3</text>
            <line class="stick" x1="650" y1="290" x2="655" y2="290"/>
            <text class="sticklabel" x="660" y="295">2</text>
            <line class="stick" x1="650" y1="320" x2="655" y2="320"/>
            <text class="sticklabel" x="660" y="325">1</text>
            <!-- Intersection point-->
            <circle class="inter" id="inter2" cx="650" cy="350" r="5" draggable="false" ondragstart="doMouseDown()"/>
            <line class="line1 interstick2" x1="650" y1="350" x2="650" y2="355"/>
            <text class="player1 legendh" id="interlabel2" x="650" y="370">1</text>
            <!-- Payoff points-->
            <circle class="pay line2" id="Payoff2_11" asso="P2_11" cx="450" cy="350" r="5"  draggable="false" ondragstart="doMouseDown()"/>
            <circle class="pay line2" id="Payoff2_12" asso="P2_12" cx="450" cy="350" r="5"  draggable="false" ondragstart="doMouseDown()"/>
            <circle class="pay line2" id="Payoff2_21" asso="P2_21" cx="650" cy="350" r="5" draggable="false" ondragstart="doMouseDown()"/>
            <circle class="pay line2" id="Payoff2_22" asso="P2_22" cx="650" cy="350" r="5" draggable="false" ondragstart="doMouseDown()"/>
            
            
            <!-- Drawing the contour-->
            <polyline class="contour" points="50,500 50,700 250,700, 250,500, 50,500"/>
            <!-- Best player1 --->
            <polyline  class="brline line1" points="50,500 50,700 250,700, 250,500"/>
            <!-- Best player2 --->
            <polyline class="brline line2" points="50,500 50,700 250,700, 250,500"/>
            <!--pure equilibrium--->
            <circle class="br" cx="250" cy="700" r="10"  draggable="false" />
            <circle class="br" cx="250" cy="700" r="10" draggable="false"/>
            <!--mixed equilibrium--->
            <rect class="br" x="40" y="490" width="20" height="20" fill="green"/>
            
            <!--legend -->
            <line class="line2" x1="50" y1="450" x2="250" y2="450"/>
            <line class="stick" x1="50" y1="445" x2="50" y2="455"/>
            <line class="stick" x1="250" y1="445" x2="250" y2="455"/>
            <line class="line2 interstick1" x1="50" y1="445" x2="50" y2="455"/>
            <text class="player2 strat_right strat22" x="25" y="455">S2 </text><text class="player2" x="35" y="455">=0</text>
            <text class="player2 strat_left strat21" x="255" y="455">S1 </text><text class="player2" x="270" y="455">=0</text>
            <text class="player1 strat_right strat11" x="35" y="505">S2 </text>
            <text class="player1 strat_right strat12" x="35" y="705">S1 </text>
            <text class="player2 strat strat21" x="50" y="720">S2 </text>
            <text class="player2 strat strat22" x="250" y="720">S1 </text>
            
            <text class="player1 strat strat11 middle12" x="35" y="430">S2 </text>
            <text class="player1 strat strat12 middle11" x="265" y="430">S1 </text>
            <text class="player2 strat strat21 middle22" x="435" y="430">S2 </text>
            <text class="player2 strat strat22 middle21" x="665" y="430">S1 </text>
            
            <line class="line1" x1="450" y1="450" x2="650" y2="450"/>
            <line class="stick" x1="450" y1="445" x2="450" y2="455"/>
            <line class="stick" x1="650" y1="445" x2="650" y2="455"/>
            <line class="line1 interstick2" x1="450" y1="445" x2="650" y2="455"/>
            <text class="player1 strat_right strat12" x="425" y="455">S2 </text><text class="player1" x="435" y="455">=0</text>
            <text class="player1 strat_left strat11" x="655" y="455">S1 </text><text class="player1" x="675" y="455">=0</text>
            
        </svg>
        
                                                                    
</body>
</html>
